{"ast":null,"code":"import React,{useState,useEffect}from\"react\";import axios from\"axios\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Transactions=_ref=>{let{selectedMonth}=_ref;const[transactions,setTransactions]=useState([]);// Holds the list of transactions\nconst[search,setSearch]=useState(\"\");// Search input state\nconst[page,setPage]=useState(1);// Current page state\nconst[total,setTotal]=useState(0);// Total number of records\n// Fetch transactions whenever search, page, or month changes\nuseEffect(()=>{const fetchTransactions=async()=>{try{const{data}=await axios.get(\"http://localhost:5000/api/transactions\",{params:{page,perPage:10,search,month:selectedMonth}});setTransactions(data.transactions);setTotal(data.total);// Update total count for pagination\n}catch(error){console.error(\"Error fetching transactions:\",error);}};fetchTransactions();},[search,page,selectedMonth]);// Handle Previous button click\nconst handlePrevious=()=>{if(page>1)setPage(page-1);};// Handle Next button click\nconst handleNext=()=>{if(page*10<total)setPage(page+1);};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Search by title, description, or price\",value:search,onChange:e=>{setSearch(e.target.value);setPage(1);// Reset to the first page when searching\n}}),/*#__PURE__*/_jsxs(\"table\",{children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Title\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Description\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Price\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Date of Sale\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:transactions.length>0?transactions.map(tx=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:tx.title}),/*#__PURE__*/_jsx(\"td\",{children:tx.description}),/*#__PURE__*/_jsxs(\"td\",{children:[\"$\",tx.price.toFixed(2)]}),/*#__PURE__*/_jsx(\"td\",{children:new Date(tx.dateOfSale).toLocaleDateString()})]},tx._id)):/*#__PURE__*/_jsx(\"tr\",{children:/*#__PURE__*/_jsx(\"td\",{colSpan:\"4\",children:\"No transactions found\"})})})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:\"flex\",justifyContent:\"center\",marginTop:\"10px\"},children:[/*#__PURE__*/_jsx(\"button\",{onClick:handlePrevious,disabled:page===1,children:\"Previous\"}),/*#__PURE__*/_jsxs(\"span\",{style:{margin:\"0 10px\"},children:[\"Page \",page]}),/*#__PURE__*/_jsx(\"button\",{onClick:handleNext,disabled:page*10>=total,children:\"Next\"})]})]});};export default Transactions;","map":{"version":3,"names":["React","useState","useEffect","axios","jsx","_jsx","jsxs","_jsxs","Transactions","_ref","selectedMonth","transactions","setTransactions","search","setSearch","page","setPage","total","setTotal","fetchTransactions","data","get","params","perPage","month","error","console","handlePrevious","handleNext","children","type","placeholder","value","onChange","e","target","length","map","tx","title","description","price","toFixed","Date","dateOfSale","toLocaleDateString","_id","colSpan","style","display","justifyContent","marginTop","onClick","disabled","margin"],"sources":["E:/FS/frontend/src/components/Transactions.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport axios from \"axios\";\r\n\r\nconst Transactions = ({ selectedMonth }) => {\r\n    const [transactions, setTransactions] = useState([]); // Holds the list of transactions\r\n    const [search, setSearch] = useState(\"\"); // Search input state\r\n    const [page, setPage] = useState(1); // Current page state\r\n    const [total, setTotal] = useState(0); // Total number of records\r\n\r\n    // Fetch transactions whenever search, page, or month changes\r\n    useEffect(() => {\r\n        const fetchTransactions = async () => {\r\n            try {\r\n                const { data } = await axios.get(\"http://localhost:5000/api/transactions\", {\r\n                    params: { \r\n                        page, \r\n                        perPage: 10, \r\n                        search, \r\n                        month: selectedMonth \r\n                    },\r\n                });\r\n                setTransactions(data.transactions);\r\n                setTotal(data.total); // Update total count for pagination\r\n            } catch (error) {\r\n                console.error(\"Error fetching transactions:\", error);\r\n            }\r\n        };\r\n\r\n        fetchTransactions();\r\n    }, [search, page, selectedMonth]);\r\n\r\n    // Handle Previous button click\r\n    const handlePrevious = () => {\r\n        if (page > 1) setPage(page - 1);\r\n    };\r\n\r\n    // Handle Next button click\r\n    const handleNext = () => {\r\n        if (page * 10 < total) setPage(page + 1);\r\n    };\r\n\r\n    return (\r\n        <div>\r\n            {/* Search Bar */}\r\n            <input\r\n                type=\"text\"\r\n                placeholder=\"Search by title, description, or price\"\r\n                value={search}\r\n                onChange={(e) => {\r\n                    setSearch(e.target.value);\r\n                    setPage(1); // Reset to the first page when searching\r\n                }}\r\n            />\r\n\r\n            {/* Transactions Table */}\r\n            <table>\r\n                <thead>\r\n                    <tr>\r\n                        <th>Title</th>\r\n                        <th>Description</th>\r\n                        <th>Price</th>\r\n                        <th>Date of Sale</th>\r\n                    </tr>\r\n                </thead>\r\n                <tbody>\r\n                    {transactions.length > 0 ? (\r\n                        transactions.map((tx) => (\r\n                            <tr key={tx._id}>\r\n                                <td>{tx.title}</td>\r\n                                <td>{tx.description}</td>\r\n                                <td>${tx.price.toFixed(2)}</td>\r\n                                <td>{new Date(tx.dateOfSale).toLocaleDateString()}</td>\r\n                            </tr>\r\n                        ))\r\n                    ) : (\r\n                        <tr>\r\n                            <td colSpan=\"4\">No transactions found</td>\r\n                        </tr>\r\n                    )}\r\n                </tbody>\r\n            </table>\r\n\r\n            {/* Pagination Controls */}\r\n            <div style={{ display: \"flex\", justifyContent: \"center\", marginTop: \"10px\" }}>\r\n                <button onClick={handlePrevious} disabled={page === 1}>\r\n                    Previous\r\n                </button>\r\n                <span style={{ margin: \"0 10px\" }}>Page {page}</span>\r\n                <button onClick={handleNext} disabled={page * 10 >= total}>\r\n                    Next\r\n                </button>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Transactions;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}